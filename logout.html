<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Logout - Dashboard</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Bootstrap Icons -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css" rel="stylesheet">
    <!-- Custom Styles -->
    <link rel="stylesheet" href="static/css/Dashboard.css">
    <!-- Feather Icons -->
    <script src="https://unpkg.com/feather-icons"></script>
</head>
<body class="logout-page">
    <div class="logout-container">
        <div class="logout-card">
            <div class="logout-header">
                <div class="logout-icon">
                    <i data-feather="log-out"></i>
                </div>
                <h2>Logging Out</h2>
                <p>Please wait while we securely log you out...</p>
            </div>
            
            <div class="logout-progress">
                <div class="progress">
                    <div class="progress-bar progress-bar-striped progress-bar-animated" 
                         role="progressbar" style="width: 0%" id="logoutProgress"></div>
                </div>
                <div class="logout-steps">
                    <div class="step active" id="step1">
                        <i data-feather="shield"></i>
                        <span>Securing session</span>
                    </div>
                    <div class="step" id="step2">
                        <i data-feather="database"></i>
                        <span>Clearing data</span>
                    </div>
                    <div class="step" id="step3">
                        <i data-feather="check-circle"></i>
                        <span>Complete</span>
                    </div>
                </div>
            </div>

            <div class="logout-actions" style="display: none;" id="logoutActions">
                <div class="alert alert-success">
                    <i data-feather="check-circle"></i>
                    You have been successfully logged out.
                </div>
                <div class="action-buttons">
                    <a href="index.html" class="btn btn-primary">
                        <i data-feather="home"></i>
                        Return to Dashboard
                    </a>
                    <button class="btn btn-outline-secondary" onclick="window.close()">
                        <i data-feather="x"></i>
                        Close Window
                    </button>
                </div>
            </div>

            <div class="logout-info">
                <div class="info-item">
                    <i data-feather="clock"></i>
                    <span>Session Duration: <strong id="sessionDuration">2h 34m</strong></span>
                </div>
                <div class="info-item">
                    <i data-feather="activity"></i>
                    <span>Last Activity: <strong id="lastActivity">Just now</strong></span>
                </div>
                <div class="info-item">
                    <i data-feather="shield"></i>
                    <span>Security Level: <strong>High</strong></span>
                </div>
            </div>

            <div class="logout-footer">
                <p class="text-muted">
                    <i data-feather="info"></i>
                    For your security, all browser data has been cleared.
                </p>
            </div>
        </div>
    </div>

    <!-- Bootstrap JavaScript -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    
    <script>
        // Initialize Feather Icons
        feather.replace();

        // Logout animation sequence
        document.addEventListener('DOMContentLoaded', function() {
            const progressBar = document.getElementById('logoutProgress');
            const steps = document.querySelectorAll('.step');
            const logoutActions = document.getElementById('logoutActions');
            
            let currentStep = 0;
            let progress = 0;

            function updateProgress() {
                if (progress <= 100) {
                    progressBar.style.width = progress + '%';
                    
                    // Update steps
                    if (progress >= 30 && currentStep === 0) {
                        steps[0].classList.remove('active');
                        steps[0].classList.add('completed');
                        steps[1].classList.add('active');
                        currentStep = 1;
                    } else if (progress >= 70 && currentStep === 1) {
                        steps[1].classList.remove('active');
                        steps[1].classList.add('completed');
                        steps[2].classList.add('active');
                        currentStep = 2;
                    } else if (progress >= 100 && currentStep === 2) {
                        steps[2].classList.remove('active');
                        steps[2].classList.add('completed');
                        
                        // Show logout actions
                        setTimeout(() => {
                            logoutActions.style.display = 'block';
                            logoutActions.classList.add('fade-in-up');
                        }, 500);
                    }
                    
                    progress += Math.random() * 3 + 1; // Random progress increment
                    setTimeout(updateProgress, 100 + Math.random() * 200);
                }
            }

            // Start logout process
            setTimeout(updateProgress, 1000);

            // Update session info
            updateSessionInfo();
        });

        function updateSessionInfo() {
            // Simulate session duration calculation
            const startTime = new Date();
            startTime.setHours(startTime.getHours() - 2);
            startTime.setMinutes(startTime.getMinutes() - 34);
            
            const duration = calculateDuration(startTime, new Date());
            document.getElementById('sessionDuration').textContent = duration;
            
            // Update last activity
            document.getElementById('lastActivity').textContent = 'Just now';
        }

        function calculateDuration(start, end) {
            const diff = end - start;
            const hours = Math.floor(diff / (1000 * 60 * 60));
            const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
            return `${hours}h ${minutes}m`;
        }

        // Add logout page specific animations
        const logoutCard = document.querySelector('.logout-card');
        logoutCard.style.animationDelay = '0.2s';
        logoutCard.classList.add('fade-in-up');
    </script>
</body>
</html>